{"version":3,"file":"static/js/7.74e7f919.chunk.js","mappings":"kKAwBA,IApBmB,SAAC,GAAgB,IAAdA,EAAa,EAAbA,OAKbC,GAASC,EAAAA,EAAAA,MAEhB,OACE,wBACGF,EAAOG,KAAI,YAAoB,IAAjBC,EAAgB,EAAhBA,GAAIC,EAAY,EAAZA,MACjB,OACE,SAAC,KAAD,CAAMC,MAAO,CAACC,KAAKN,GAAoBO,GAAE,kBAAaJ,GAAtD,UACE,wBAAKC,KAD4BD,EAItC,KAGN,C,6FChBKK,EAAY,SAyDlB,UAxDe,WAAO,IAAD,EAEnB,GAAwCC,EAAAA,EAAAA,MAAxC,eAAOC,EAAP,KAAqBC,EAArB,KAEMC,EAAK,UAAGF,EAAaG,IAAI,gBAApB,QAAgC,GAC3CC,QAAQC,IAAI,iCAAwBH,GACpC,IAAMI,EAAWC,KAAKC,MAAMC,aAAaC,QAAQZ,IACjD,GAA4Ba,EAAAA,EAAAA,WAAS,kBACnCL,GAAYJ,GAAZ,OAAwBI,GAAY,EADD,IAArC,eAAOjB,EAAP,KAAeuB,EAAf,MAIAC,EAAAA,EAAAA,YAAU,WACRJ,aAAaK,QAAQhB,EAAWS,KAAKQ,UAAU1B,GAWhD,GAAE,CAACA,EAAQa,IAuBZ,OACE,iCACE,kBAAMc,SAfW,SAAAC,GACnBA,EAAEC,kBAEFC,EAAAA,EAAAA,GAAY,sBAAD,OAAuBjB,IAC/BkB,MAAK,YAA4B,IAAjBC,EAAgB,EAAxBC,KAAQD,QACfjB,QAAQC,IAAI,UAAWgB,GACvBT,GAAU,OAAIS,GACf,IACAE,OAAM,SAAAC,GACLpB,QAAQC,IAAImB,EACb,GACJ,EAIG,WACE,kBAAOC,MAAOvB,EAAOwB,SAxBN,SAAAT,GACnB,IAAMU,EAAcV,EAAEW,OAAOH,MAC7B,GAAoB,KAAhBE,EACF,OAAO1B,EAAgB,CAAC,GAE1BA,EAAgB,CAAEC,MAAOyB,GAC1B,KAmBK,0CAEDtC,EAAOwC,OAAS,IAAK,SAAC,IAAD,CAAYxC,OAAQA,MAG/C,C","sources":["components/MoviesList/MoviesList.jsx","components/pages/Movies.jsx"],"sourcesContent":["\nimport { Link } from \"react-router-dom\";\nimport { useLocation } from 'react-router-dom';\n\nconst MoviesList = ({ movies }) => {\n    // const [movie, setMovie] = useState({})\n    // const clickHandler = (e) => {\n    //     console.log(e.target);\n    // }\n   const location=useLocation()\n  // console.log(\"🚀 ~ Home ~ location:\", location)\n  return (\n    <ul>\n      {movies.map(({ id, title }) => {\n        return (\n          <Link state={{from:location}} key={id} to={`/movies/${id}`}>\n            <li>{title}</li>\n          </Link>\n        );\n      })}\n    </ul>\n  );\n};\n\nexport default MoviesList;\n","import MoviesList from 'components/MoviesList/MoviesList';\nimport { useEffect } from 'react';\nimport { useState } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport { fetchMovies } from 'servises/getMovies';\n\nconst LS_MOVIES = 'movies';\nconst Movies = () => {\n  // const [movies, setMovies] = useState(() => ([]));\n  const [searchParams, setSearchParams] = useSearchParams();\n\n  const query = searchParams.get('query') ?? '';\n  console.log('🚀 ~ Movies ~ query:', query);\n  const moviesLS = JSON.parse(localStorage.getItem(LS_MOVIES));\n  const [movies, setMovies] = useState(() =>\n    moviesLS && query ? [...moviesLS] : []\n  );\n  \n  useEffect(() => {\n    localStorage.setItem(LS_MOVIES, JSON.stringify(movies));\n\n    // return () => {\n    //   console.log('🚀 ~ return ~ query:', query);\n    //   console.log('🚀 ~ return ~ movies:', movies);\n    //   if (movies.length > 0 && query === '') {\n    //     console.log('Єто устовие очистки сторедж', query);\n    //     localStorage.removeItem(LS_MOVIES);\n    //     return;\n    //   }\n    // };\n  }, [movies, query]);\n\n  const handelChenge = e => {\n    const searchValue = e.target.value;\n    if (searchValue === '') {\n      return setSearchParams({});\n    }\n    setSearchParams({ query: searchValue });\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    fetchMovies(`search/movie?query=${query}`)\n      .then(({ data: { results } }) => {\n        console.log('results', results);\n        setMovies([...results]);\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  };\n\n  return (\n    <>\n      <form onSubmit={handleSubmit}>\n        <input value={query} onChange={handelChenge} />\n        <button>Search</button>\n      </form>\n      {movies.length > 0 && <MoviesList movies={movies} />}\n    </>\n  );\n};\nexport default Movies;\n"],"names":["movies","location","useLocation","map","id","title","state","from","to","LS_MOVIES","useSearchParams","searchParams","setSearchParams","query","get","console","log","moviesLS","JSON","parse","localStorage","getItem","useState","setMovies","useEffect","setItem","stringify","onSubmit","e","preventDefault","fetchMovies","then","results","data","catch","error","value","onChange","searchValue","target","length"],"sourceRoot":""}